<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Why my book uses Node.js and JavaScript - Alex Lawrence</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta property="og:title" content="Why my book uses Node.js and JavaScript" />
<meta property="og:description" content="This post explains why I chose Node.js as runtime platform and JavaScript as programming language for my book &ldquo;Implementing DDD, CQRS and Event Sourcing&rdquo;. The described reasons incorporate personal experience, the desired target audience, as well as platform and language characteristics. Also, the benefits and implications of static types are briefly discussed. Finally, the post closes with an outlook of future additions to the existing book.
Personal experience One reason for using Node." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.alex-lawrence.com/posts/why-my-book-uses-nodejs-and-javascript/" />



<meta property="article:published_time" content="2020-12-21T00:00:00&#43;00:00"/>

<meta property="article:modified_time" content="2020-12-21T00:00:00&#43;00:00"/>










<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Why my book uses Node.js and JavaScript"/>
<meta name="twitter:description" content="This post explains why I chose Node.js as runtime platform and JavaScript as programming language for my book &ldquo;Implementing DDD, CQRS and Event Sourcing&rdquo;. The described reasons incorporate personal experience, the desired target audience, as well as platform and language characteristics. Also, the benefits and implications of static types are briefly discussed. Finally, the post closes with an outlook of future additions to the existing book.
Personal experience One reason for using Node."/>
<link rel="stylesheet" type="text/css" media="screen" href="https://www.alex-lawrence.com/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://www.alex-lawrence.com/css/main.css" />
	<link rel="stylesheet" type="text/css" href="https://www.alex-lawrence.com/css/index.css" />
	<link rel="stylesheet" type="text/css" href="https://www.alex-lawrence.com/css/dark.css" media="(prefers-color-scheme: dark)" />

	<script src="https://www.alex-lawrence.com/js/feather.min.js"></script>
	
	<script src="https://www.alex-lawrence.com/js/main.js"></script>
	<script src="https://www.alex-lawrence.com/js/index.js"></script>
</head>

<body>
	<div class="container wrapper post">
		<div class="header">
	<base href="https://www.alex-lawrence.com/">
	<h1 class="site-title"><a href="https://www.alex-lawrence.com/">Alex Lawrence</a></h1>
	<div class="site-description"><h2>Full-Stack Developer, Technical Lead, Software Architect</h2><nav class="nav social">
			<ul class="flat"><a href="https://github.com/alexlawrence" title="Github"><i data-feather="github"></i></a><a href="https://twitter.com/lx_lawrence" title="Twitter"><i data-feather="twitter"></i></a><a href="/posts/index.xml" title="RSS"><i data-feather="rss"></i></a></ul>
		</nav>
	</div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="/">Profile</a>
			</li>
			
			<li>
				<a href="/resume">Resume</a>
			</li>
			
			<li>
				<a href="/posts">Posts</a>
			</li>
			
			<li>
				<a href="/book">Book</a>
			</li>
			
			<li>
				<a href="/contact">Contact</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post-header">
			<h1 class="title">Why my book uses Node.js and JavaScript</h1>
			
				<div class="meta">
					Posted at Dec 21, 2020 &mdash;
					Reading time: 5 minutes
				</div>
			
		</div>

		<div class="markdown">
			

<p>This post explains why I chose Node.js as runtime platform and JavaScript as programming language for my book <a href="https://leanpub.com/implementing-ddd-cqrs-and-event-sourcing">&ldquo;Implementing DDD, CQRS and Event Sourcing&rdquo;</a>. The described reasons incorporate personal experience, the desired target audience, as well as platform and language characteristics. Also, the benefits and implications of static types are briefly discussed. Finally, the post closes with an outlook of future additions to the existing book.</p>

<h2 id="personal-experience">Personal experience</h2>

<p>One reason for using Node.js and JavaScript in my book is that I&rsquo;ve worked with both for almost 8 years. As for JavaScript as a programming language, I have around 14 years of experience. Also, two projects in which I applied CQRS and Event Sourcing made use of those technologies. Therefore, it seemed like a natural choice for me when I planned to write a technical book.</p>

<h2 id="broad-audience">Broad audience</h2>

<p>Another reason for JavaScript is that it is a very widespread language, with which I can reach a broad audience. While not everybody may like it, there are many people who understand it. Also, its syntax can look similar to other languages, such as Java or C#, especially when using classes. While there are programming languages with distinct characteristics for specific purposes, the use of JavaScript simply enables a high reach.</p>

<p>As for syntax similarities, here is an exemplary Application Services class in JavaScript:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#ff79c6">class</span> NoteApplicationServices {

  #noteRepository;
  
  constructor({noteRepository}) {
    <span style="color:#ff79c6">this</span>.#noteRepository <span style="color:#ff79c6">=</span> noteRepository;
  }

  <span style="color:#ff79c6">async</span> createNote({noteId, content, category}) {
    <span style="color:#ff79c6">const</span> note <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> Note({id<span style="color:#ff79c6">:</span> noteId, content, category});
    <span style="color:#ff79c6">await</span> <span style="color:#ff79c6">this</span>.#noteRepository.save(note);
  }

  <span style="color:#6272a4">/* .. */</span>

}
</code></pre></div>
<p>The equivalent (blocking) implementation in Java merely differs in its type annotations:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">NoteApplicationServices</span> <span style="color:#ff79c6">{</span>

  <span style="color:#8be9fd;font-style:italic">private</span> NoteRepository noteRepository<span style="color:#ff79c6">;</span>
  
  constructor<span style="color:#ff79c6">(</span>NoteRepository noteRepository<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
    <span style="color:#ff79c6">this</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">noteRepository</span> <span style="color:#ff79c6">=</span> noteRepository<span style="color:#ff79c6">;</span>
  <span style="color:#ff79c6">}</span>

  <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">createNote</span><span style="color:#ff79c6">(</span>UUID noteId<span style="color:#ff79c6">,</span> string content<span style="color:#ff79c6">,</span> string category<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
    Note note <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> Note<span style="color:#ff79c6">(</span>noteId<span style="color:#ff79c6">,</span> content<span style="color:#ff79c6">,</span> category<span style="color:#ff79c6">);</span>
    <span style="color:#ff79c6">this</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">noteRepository</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">save</span><span style="color:#ff79c6">(</span>note<span style="color:#ff79c6">);</span>
  <span style="color:#ff79c6">}</span>

  <span style="color:#6272a4">/* .. */</span>

<span style="color:#ff79c6">}</span></code></pre></div>
<p>This syntax similarity is also given for other programming languages, such as C# or PHP.</p>

<h2 id="universal-language">Universal language</h2>

<p>My book contains a dedicated chapter on the User Interface part. There, I also use JavaScript for all client-side code. This is because it is natively supported in the browser and probably the most used language for web frontends. Furthermore, there is some universal infrastructure code that is consumed by both the server and the client. With this approach, the reader only needs to know one language in order to understand both backend and frontend code.</p>

<h2 id="platform-simplicity">Platform simplicity</h2>

<p>Over the years, I&rsquo;ve worked with multiple languages, runtimes and servers for backends. Professionally, I used PHP and Apache, as well as C#, the CLR and IIS. When I started with Node.js, I was impressed by the minimal overhead for certain use cases. At the same time, it also felt suitable for building complex production-grade software, especially with selected third-party libraries. Overall, it made a good fit for the implementations in my book, which often serve an illustration purpose.</p>

<p>As an example, take a look at a simplified factory for creating an HTTP filesystem interface:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">const</span> createHttpFilesystemInterface <span style="color:#ff79c6">=</span> pathResolver =&gt;
  <span style="color:#ff79c6">async</span> (request, response) =&gt; {
    <span style="color:#ff79c6">const</span> filePath <span style="color:#ff79c6">=</span> pathResolver(request);
    <span style="color:#ff79c6">try</span> {
      <span style="color:#ff79c6">await</span> stat(filePath);
      <span style="color:#ff79c6">const</span> fileExtension <span style="color:#ff79c6">=</span> path.extname(filePath);
      <span style="color:#ff79c6">const</span> contentType <span style="color:#ff79c6">=</span> contentTypeByExtension[fileExtension] <span style="color:#ff79c6">||</span> <span style="color:#f1fa8c">&#39;text/plain&#39;</span>;
      response.writeHead(<span style="color:#bd93f9">200</span>, {<span style="color:#f1fa8c">&#39;Content-Type&#39;</span><span style="color:#ff79c6">:</span> contentType});
      createReadStream(filePath).pipe(response);
    } <span style="color:#ff79c6">catch</span> (error) {
      response.writeHead(<span style="color:#bd93f9">404</span>);
      response.end();
    }
  };

<span style="color:#ff79c6">const</span> contentTypeByExtension <span style="color:#ff79c6">=</span> {
  <span style="color:#f1fa8c">&#39;.js&#39;</span><span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;application/javascript&#39;</span>,
  <span style="color:#f1fa8c">&#39;.html&#39;</span><span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;text/html&#39;</span>,
  <span style="color:#f1fa8c">&#39;.css&#39;</span><span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;text/css&#39;</span>,
};

<span style="color:#6272a4">// example usage
</span><span style="color:#6272a4"></span><span style="color:#ff79c6">const</span> httpFilesystemInterface <span style="color:#ff79c6">=</span> createHttpFilesystemInterface(
  request =&gt; <span style="color:#f1fa8c">`</span><span style="color:#f1fa8c">${</span>rootDirectory<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">/</span><span style="color:#f1fa8c">${</span>url.parse(request.url).pathname<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">`</span>);
http.createServer(httpFilesystemInterface).listen(<span style="color:#bd93f9">50000</span>);
</code></pre></div>
<p>This is not to exemplify that Node.js generally makes things simpler. However, there are many platforms where there is a lot more boilerplate code involved.</p>

<h2 id="concise-and-compact-code">Concise and compact code</h2>

<p>The code examples shown in my book must be compact. Especially in the PDF version, where there is a line length limit of 85 characters. For certain aspects, JavaScript enables to write concise and compact code. Often, this is the case for simple things due to the minimal overhead or ceremony. On top of that, there are certain language constructs that help to keep code short. Some examples are arrow function expressions, object literals, shorthand property names and destructuring assignments.</p>

<p>The below example shows the implementation of a simple Value Object type:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#ff79c6">const</span> Money <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">function</span>({value, currency}) {
  <span style="color:#8be9fd;font-style:italic">Object</span>.freeze(<span style="color:#8be9fd;font-style:italic">Object</span>.assign(<span style="color:#ff79c6">this</span>, {value, currency}));
};
</code></pre></div>
<p>At first glance, the example may even look overly complex. One could also implement an arrow function that creates an anonymous object and freezes it. However, the above implementation is comparable to a full-blown class in a class-based language. The constructor function returns an instance that can be checked for its type. For example, the expression <code>new Money({value: 10, currency: 'USD'}) instanceof Money</code> evaluates to <code>true</code>.</p>

<h2 id="what-about-types">What about types?</h2>

<p>JavaScript is a dynamically typed language. Put the other way round, it lacks static typing. This can either be seen as advantage or as shortcoming. With regard to DDD and the modeling of complex domains, it is probably a disadvantage. The implementation of a complex Domain Model benefits from static typing and a powerful type system. For the examples in my book, the absence of types is in fact advantageous, as it keeps the code compact.</p>

<p>As example for the benefits of a powerful static type system, look at the following Domain Model implementation:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript">type Author <span style="color:#ff79c6">=</span> {id: <span style="color:#8be9fd">UUID</span>, firstName: <span style="color:#8be9fd">string</span>, lastName: <span style="color:#8be9fd">string</span>};
type Grade <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;A&#39;</span> <span style="color:#ff79c6">|</span> <span style="color:#f1fa8c">&#39;B&#39;</span> <span style="color:#ff79c6">|</span> <span style="color:#f1fa8c">&#39;C&#39;</span> <span style="color:#ff79c6">|</span> <span style="color:#f1fa8c">&#39;D&#39;</span> <span style="color:#ff79c6">|</span> <span style="color:#f1fa8c">&#39;E&#39;</span> <span style="color:#ff79c6">|</span> <span style="color:#f1fa8c">&#39;F&#39;</span>;

type ExamResult <span style="color:#ff79c6">=</span> {author: <span style="color:#8be9fd">Author</span>, grade: <span style="color:#8be9fd">Grade</span>};</code></pre></div>
<p>The type <code>Grade</code> expresses the domain-specific concept of a grade on type level.  There are no runtime checks required for ensuring correct values. Apart from the Domain layer, other software parts may not benefit as much from static types. Also, trivial domain problems may be solved adequately with plain JavaScript. On top of that, there are possibilities for runtime type checking. Generally, the use of TypeScript has likely no disadvantages. At the same time, plain JavaScript can also be sufficient.</p>

<h2 id="why-not-something-else">Why not something else?</h2>

<p>There would have been many alternatives for a programming language and a runtime to use for my book. Node.js and JavaScript are generally <strong>not</strong> superior for applying DDD, CQRS or Event Sourcing. As mentioned, plain JavaScript can even be ill-suited for tackling complex domain problems due to the lack of static types. However, the two proved to be a fitting choice for my book. In the end, most of the example implementations can be easily mapped to other technologies anyway.</p>

<h2 id="plans-for-the-book">Plans for the book</h2>

<p>While working on the book, I was sometimes concerned about not using TypeScript or even the overall choice of technologies. In order to ease my mind, I thought about future editions using TypeScript or even Rust without Node.js. As of now, I don&rsquo;t think that this is necessary. However, there is potential for useful future additions. My near-term plan is to either write an appendix on the benefits of types or to annotate existing affected content.</p>

<p><a href="https://leanpub.com/implementing-ddd-cqrs-and-event-sourcing">Buy the book</a>
•
<a href="https://twitter.com/lx_lawrence/status/1341147952195231745">Discuss on Twitter</a></p>

		</div>

		<div class="post-tags">
			
				
			
		</div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div> © 2020 Alex Lawrence |  <a href="https://github.com/vividvilla/ezhil">Ezhil theme</a> | Built with <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>



<script>feather.replace()</script>
</body>
</html>
